function esInitGl(b){var a=document.getElementById(b);var d=null;try{d=a.getContext("webgl")}catch(c){}if(d==null){try{d=a.getContext("experimental-webgl")}catch(c){}}return d}function esInitSw(b){var a=document.getElementById(b);return a.getContext("2d")}function esNextFrame(b){var c=Date.now();function a(){var d=Date.now();if(!b((d-c)*0.001)){window.requestAnimationFrame(a)}c=d}window.requestAnimationFrame(a)}var ES_VERTEX=1;var ES_FRAGMENT=2;function esProgram(a){this.gl=a;this.program=a.createProgram()}function compileShader(d,c,a){if(a==ES_VERTEX){a=d.VERTEX_SHADER}else{a=d.FRAGMENT_SHADER}var b=d.createShader(a);d.shaderSource(b,c);d.compileShader(b);if(!d.getShaderParameter(b,d.COMPILE_STATUS)){alert(d.getShaderInfoLog(b))}return b}esProgram.prototype.addShaderId=function(a,b){var c=document.getElementById(a).text;this.gl.attachShader(this.program,compileShader(this.gl,c,b))};esProgram.prototype.getUniform=function(a){return this.gl.getUniformLocation(this.program,a)};esProgram.prototype.link=function(){this.gl.linkProgram(this.program)};esProgram.prototype.use=function(){this.gl.useProgram(this.program)};var ES_LOAD_IMAGE=1;var ES_LOAD_AUDIO=2;function esLoad(){this.list=[]}esLoad.prototype.loadImage=function(a){var b=new Image();this.list.push([b,a,ES_LOAD_IMAGE]);return b};esLoad.prototype.loadAudio=function(a){var b=new Audio();this.list.push([b,a,ES_LOAD_AUDIO]);return b};esLoad.prototype.download=function(h){var g=this.list.length;for(var b=0;b<this.list.length;b++){var e=this.list[b];var f=e[0];var a=e[1];var c=e[2];var d=(function(j,i){return function(){g--;if(g==0){h()}}})(f,a);switch(c){default:case ES_LOAD_IMAGE:f.onload=d;f.src=a;break;case ES_LOAD_AUDIO:f.addEventListener("canplaythrough",d,false);f.src=a;break}}};